\hypertarget{t__memleak_8cpp_source}{}\doxysection{t\+\_\+memleak.\+cpp}
\label{t__memleak_8cpp_source}\index{tests/misc/t\_memleak.cpp@{tests/misc/t\_memleak.cpp}}
\mbox{\hyperlink{t__memleak_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00001}00001 \textcolor{comment}{// Copyright 2009 Google Inc. All Rights Reserved.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00002}00002 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00003}00003 \textcolor{comment}{// Redistribution and use in source and binary forms, with or without}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00004}00004 \textcolor{comment}{// modification, are permitted provided that the following conditions are}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00005}00005 \textcolor{comment}{// met:}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00006}00006 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00007}00007 \textcolor{comment}{//     * Redistributions of source code must retain the above copyright}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00008}00008 \textcolor{comment}{// notice, this list of conditions and the following disclaimer.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00009}00009 \textcolor{comment}{//     * Redistributions in binary form must reproduce the above}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00010}00010 \textcolor{comment}{// copyright notice, this list of conditions and the following disclaimer}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00011}00011 \textcolor{comment}{// in the documentation and/or other materials provided with the}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00012}00012 \textcolor{comment}{// distribution.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00013}00013 \textcolor{comment}{//     * Neither the name of Google Inc. nor the names of its}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00014}00014 \textcolor{comment}{// contributors may be used to endorse or promote products derived from}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00015}00015 \textcolor{comment}{// this software without specific prior written permission.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00016}00016 \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00017}00017 \textcolor{comment}{// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00018}00018 \textcolor{comment}{// "{}AS IS"{} AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00019}00019 \textcolor{comment}{// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00020}00020 \textcolor{comment}{// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00021}00021 \textcolor{comment}{// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00022}00022 \textcolor{comment}{// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00023}00023 \textcolor{comment}{// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00024}00024 \textcolor{comment}{// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00025}00025 \textcolor{comment}{// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00026}00026 \textcolor{comment}{// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00027}00027 \textcolor{comment}{// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00028}00028 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00029}00029 \textcolor{comment}{// This sample shows how to use Google Test listener API to implement}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00030}00030 \textcolor{comment}{// a primitive leak checker.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00031}00031 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00032}00032 \textcolor{preprocessor}{\#include <stdio.h>}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00033}00033 \textcolor{preprocessor}{\#include <stdlib.h>}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00034}00034 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00035}00035 \textcolor{preprocessor}{\#include <gtest/gtest.h>}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00036}00036 using ::testing::EmptyTestEventListener;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00037}00037 using ::testing::InitGoogleTest;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00038}00038 using ::testing::Test;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00039}00039 using ::testing::TestEventListeners;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00040}00040 using ::testing::TestInfo;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00041}00041 using ::testing::TestPartResult;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00042}00042 using ::testing::UnitTest;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00043}00043 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00044}\mbox{\hyperlink{namespaceanonymous__namespace_02t__memleak_8cpp_03}{00044}} \textcolor{keyword}{namespace }\{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00045}00045 \textcolor{comment}{// We will track memory used by this class.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00046}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{00046}} \textcolor{keyword}{class }\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{Water}} \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00047}00047  \textcolor{keyword}{public}:}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00048}00048   \textcolor{comment}{// Normal Water declarations go here.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00049}00049 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00050}00050   \textcolor{comment}{// operator new and operator delete help us control water allocation.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00051}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_aa7304c76af848955d5d2792e0f31e034}{00051}}   \textcolor{keywordtype}{void}* \textcolor{keyword}{operator} \textcolor{keyword}{new}(\textcolor{keywordtype}{size\_t} allocation\_size) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00052}00052     allocated\_++;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00053}00053     \textcolor{keywordflow}{return} malloc(allocation\_size);}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00054}00054   \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00055}00055 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00056}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_a734b34f55870100773606a694bfe13af}{00056}}   \textcolor{keywordtype}{void} \textcolor{keyword}{operator} \textcolor{keyword}{delete}(\textcolor{keywordtype}{void}* block, \textcolor{keywordtype}{size\_t} \textcolor{comment}{/* allocation\_size */}) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00057}00057     allocated\_-\/-\/;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00058}00058     free(block);}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00059}00059   \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00061}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_abea1961608c5cebe8173108dcd8dff31}{00061}}   \textcolor{keyword}{static} \textcolor{keywordtype}{int} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_abea1961608c5cebe8173108dcd8dff31}{allocated}}() \{ \textcolor{keywordflow}{return} allocated\_; \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00062}00062 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00063}00063  \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00064}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_a4f746440e170c1524e6cb97824993f46}{00064}}   \textcolor{keyword}{static} \textcolor{keywordtype}{int} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water_a4f746440e170c1524e6cb97824993f46}{allocated\_}};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00065}00065 \};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00066}00066 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00067}00067 \textcolor{keywordtype}{int} Water::allocated\_ = 0;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00068}00068 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00069}00069 \textcolor{comment}{// This event listener monitors how many Water objects are created and}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00070}00070 \textcolor{comment}{// destroyed by each test, and reports a failure if a test leaks some Water}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00071}00071 \textcolor{comment}{// objects. It does this by comparing the number of live Water objects at}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00072}00072 \textcolor{comment}{// the beginning of a test and at the end of a test.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00073}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker}{00073}} \textcolor{keyword}{class }\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker}{LeakChecker}} : \textcolor{keyword}{public} EmptyTestEventListener \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00074}00074  \textcolor{keyword}{private}:}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00075}00075   \textcolor{comment}{// Called before a test starts.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00076}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a8636b9aed48e0ad0eb591d4ddc1b1ab3}{00076}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a8636b9aed48e0ad0eb591d4ddc1b1ab3}{OnTestStart}}(\textcolor{keyword}{const} TestInfo\& \textcolor{comment}{/* test\_info */})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00077}00077     initially\_allocated\_ = Water::allocated();}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00078}00078   \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00079}00079 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00080}00080   \textcolor{comment}{// Called after a test ends.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00081}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a3100ca81f089369d4446cd1557b6d26a}{00081}}   \textcolor{keywordtype}{void} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a3100ca81f089369d4446cd1557b6d26a}{OnTestEnd}}(\textcolor{keyword}{const} TestInfo\& \textcolor{comment}{/* test\_info */})\textcolor{keyword}{ override }\{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00082}00082     \textcolor{keywordtype}{int} difference = Water::allocated() -\/ initially\_allocated\_;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00083}00083 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00084}00084     \textcolor{comment}{// You can generate a failure in any event handler except}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00085}00085     \textcolor{comment}{// OnTestPartResult. Just use an appropriate Google Test assertion to do}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00086}00086     \textcolor{comment}{// it.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00087}00087     EXPECT\_LE(difference, 0) << \textcolor{stringliteral}{"{}Leaked "{}} << difference << \textcolor{stringliteral}{"{} unit(s) of Water!"{}};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00088}00088   \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00089}00089 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00090}\mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a508e2e46087cf6d2c62e1695867e0526}{00090}}   \textcolor{keywordtype}{int} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1LeakChecker_a508e2e46087cf6d2c62e1695867e0526}{initially\_allocated\_}};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00091}00091 \};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00092}00092 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00093}\mbox{\hyperlink{namespaceanonymous__namespace_02t__memleak_8cpp_03_ab2d440885682af53a5ddae103eb62322}{00093}} \mbox{\hyperlink{namespaceanonymous__namespace_02t__memleak_8cpp_03_a851cf8f1d5cbfbcf38474c0dcb0c7668}{TEST}}(ListenersTest, DoesNotLeak) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00094}00094   \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{Water}}* water = \textcolor{keyword}{new} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{Water}};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00095}00095   \textcolor{keyword}{delete} water;}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00096}00096 \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00097}00097 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00098}00098 \textcolor{comment}{// This should fail when the -\/-\/check\_for\_leaks command line flag is}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00099}00099 \textcolor{comment}{// specified.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00100}\mbox{\hyperlink{namespaceanonymous__namespace_02t__memleak_8cpp_03_a851cf8f1d5cbfbcf38474c0dcb0c7668}{00100}} \mbox{\hyperlink{namespaceanonymous__namespace_02t__memleak_8cpp_03_a851cf8f1d5cbfbcf38474c0dcb0c7668}{TEST}}(ListenersTest, LeaksWater) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00101}00101   \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{Water}}* water = \textcolor{keyword}{new} \mbox{\hyperlink{classanonymous__namespace_02t__memleak_8cpp_03_1_1Water}{Water}};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00102}00102   EXPECT\_TRUE(water != \textcolor{keyword}{nullptr});}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00103}00103 \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00104}00104 \}  \textcolor{comment}{// namespace}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00105}00105 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00106}\mbox{\hyperlink{t__memleak_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{00106}} \textcolor{keywordtype}{int} \mbox{\hyperlink{t__memleak_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char}** argv) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00107}00107   InitGoogleTest(\&argc, argv);}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00108}00108 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00109}00109   \textcolor{keywordtype}{bool} check\_for\_leaks = \textcolor{keyword}{false};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00110}00110   \textcolor{keywordflow}{if} (argc > 1 \&\& strcmp(argv[1], \textcolor{stringliteral}{"{}-\/-\/check\_for\_leaks"{}}) == 0)}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00111}00111     check\_for\_leaks = \textcolor{keyword}{true};}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00112}00112   \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00113}00113     printf(\textcolor{stringliteral}{"{}\%s\(\backslash\)n"{}},}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00114}00114            \textcolor{stringliteral}{"{}Run this program with -\/-\/check\_for\_leaks to enable "{}}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00115}00115            \textcolor{stringliteral}{"{}custom leak checking in the tests."{}});}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00116}00116 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00117}00117   \textcolor{comment}{// If we are given the -\/-\/check\_for\_leaks command line flag, installs the}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00118}00118   \textcolor{comment}{// leak checker.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00119}00119   \textcolor{keywordflow}{if} (check\_for\_leaks) \{}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00120}00120     TestEventListeners\& listeners = UnitTest::GetInstance()-\/>listeners();}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00121}00121 }
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00122}00122     \textcolor{comment}{// Adds the leak checker to the end of the test event listener list,}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00123}00123     \textcolor{comment}{// after the default text output printer and the default XML report}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00124}00124     \textcolor{comment}{// generator.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00125}00125     \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00126}00126     \textcolor{comment}{// The order is important -\/ it ensures that failures generated in the}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00127}00127     \textcolor{comment}{// leak checker's OnTestEnd() method are processed by the text and XML}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00128}00128     \textcolor{comment}{// printers *before* their OnTestEnd() methods are called, such that}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00129}00129     \textcolor{comment}{// they are attributed to the right test. Remember that a listener}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00130}00130     \textcolor{comment}{// receives an OnXyzStart event *after* listeners preceding it in the}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00131}00131     \textcolor{comment}{// list received that event, and receives an OnXyzEnd event *before*}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00132}00132     \textcolor{comment}{// listeners preceding it.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00133}00133     \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00134}00134     \textcolor{comment}{// We don't need to worry about deleting the new listener later, as}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00135}00135     \textcolor{comment}{// Google Test will do it.}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00136}00136     listeners.Append(\textcolor{keyword}{new} LeakChecker);}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00137}00137   \}}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00138}00138   \textcolor{keywordflow}{return} RUN\_ALL\_TESTS();}
\DoxyCodeLine{\Hypertarget{t__memleak_8cpp_source_l00139}00139 \}}

\end{DoxyCode}
